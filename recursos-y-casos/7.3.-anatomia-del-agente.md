# 7.3. AnatomÃ­a del Agente

## 7.3. La AnatomÃ­a del Agente: El "Frankenstein" Operativo

Un Agente de IA no nace, **se ensambla**.

Muchos creen que la IA es un cerebro etÃ©reo flotando en la nube. Falso. Para que la IA trabaje en tu empresa, tienes que construirle un cuerpo. Tienes que conectar el cerebro (Llama) a unas manos (Herramientas), darle una memoria (RAG) y ponerle una correa (Ã‰tica).

A continuaciÃ³n, despiezamos al monstruo. Este es el diagrama de arquitectura que debes tener en tu cabeza (o en tu Miro) antes de construir nada.

***

### El Diagrama de Ensamblaje

Imagina este esquema visual al diseÃ±ar tu soluciÃ³n.

```mermaid
graph TD
    subgraph "SISTEMA NERVIOSO (OrquestaciÃ³n)"
    Trigger[âš¡ LA CHISPA (Trigger)] -->|Inicia el flujo| Cerebro
    end

    subgraph "CABEZA (Inteligencia)"
    Cerebro((ðŸ§  EL CEREBRO - Llama 3.2))
    Personalidad[ðŸŽ­ EL EGO (System Prompt)] -.-> Cerebro
    end

    subgraph "MEMORIA (Contexto)"
    RAG[ðŸ“š EL HIPOCAMPO (Vectores/PDFs)] <-->|Consulta| Cerebro
    Historial[DASH EL RECUERDO (Logs de Chat)] <-->|Contexto| Cerebro
    end

    subgraph "EXTREMIDADES (AcciÃ³n)"
    Cerebro -->|DecisiÃ³n| Manos
    Manos[ðŸ¦¾ LAS MANOS (Tools/APIs)]
    Manos -->|Email| Cliente
    Manos -->|Update| Excel
    Manos -->|Alerta| Slack
    end

    subgraph "CONTROL (Seguridad)"
    Cerebro -.->|ValidaciÃ³n| Grilletes[â›“ï¸ LOS GRILLETES (Guardrails/Ã‰tica)]
    end
    
```

### Despiece: Las 6 Partes Vitales

Si a tu agente le falta una de estas piezas, no caminarÃ¡.

#### 1. ðŸ§  El Cerebro (Modelo de Inferencia)

Es el motor de procesamiento.

* Componente: Llama 3.2 (8B o 70B).
* FunciÃ³n: Razona, entiende el lenguaje, toma decisiones lÃ³gicas.
* Sin esto: Es solo una base de datos tonta.
* UbicaciÃ³n: Ollama (Local) o Groq (Nube).

#### 2. ðŸŽ­ El Ego (System Prompt)

Es la identidad y las instrucciones base. Sin ego, el cerebro es errÃ¡tico.

* Componente: El texto que define "QuiÃ©n eres".
* FunciÃ³n: "Eres un contador estricto que odia los errores". Define el tono y las reglas inquebrantables.
* Sin esto: La IA divaga y pierde el propÃ³sito.

#### 3. ðŸ“š El Hipocampo (Memoria RAG)

El cerebro de Llama estÃ¡ congelado en 2023. El Hipocampo le da acceso al "Ahora" y al "AquÃ­".

* Componente: Tu Base Vectorial (ChromaDB / AnythingLLM).
* FunciÃ³n: Almacena tus manuales, precios actuales y correos histÃ³ricos.
* Sin esto: La IA alucina (inventa datos).

#### 4. âš¡ La Chispa (Trigger)

El evento que despierta al monstruo. Un agente no "vive" todo el tiempo, se activa por eventos.

* Componente: Un Webhook, un Cron (reloj), o un botÃ³n manual.
* Ejemplos: "Cuando llegue un correo nuevo", "Todos los viernes a las 9 AM", "Cuando se cree una fila en Excel".
* Sin esto: El sistema es pasivo (un chat), no un agente.

#### 5. ðŸ¦¾ Las Manos (Tools / Function Calling)

De nada sirve pensar si no puedes actuar. Las manos permiten al agente tocar el mundo real.

* Componente: APIs, Integraciones (Make.com, Zapier), Scripts.
* FunciÃ³n: Enviar el correo, guardar el archivo, cobrar la tarjeta.
* Sin esto: Es solo un consultor que da consejos pero no trabaja.

#### 6. â›“ï¸ Los Grilletes (Guardrails)

El mecanismo de seguridad para que el monstruo no destruya la aldea.

* Componente: Llama Guard, Filtros de Regex, Validadores de JSON.
* FunciÃ³n: Impide que la IA diga groserÃ­as, revele datos confidenciales o ejecute acciones peligrosas sin permiso.
* Sin esto: Riesgo legal y reputacional alto.

***

### El "Laboratorio" de Ensamble

Â¿CÃ³mo se ve esto en tu pantalla?

\{% tabs %\} \{% tab title="Nivel 1: El Prototipo (AnythingLLM)" %\} AquÃ­ el "Frankenstein" vive en tu laptop.

1. Cerebro: Ollama local.
2. Memoria: Tus PDFs arrastrados a la ventana.
3. Manos: Limitadas (solo te responde a ti). _Ideal para:_ Consultas internas y anÃ¡lisis de documentos. \{% endtab %\}

\{% tab title="Nivel 2: El AutÃ³mata (Make.com)" %\} AquÃ­ el monstruo sale a trabajar.

1. Chispa: Llega un correo a `ventas@tuempresa.com`.
2. Cerebro (Groq): Lee el correo y decide si es una queja o una compra.
3. Manos: Si es compra -> Crea fila en Airtable. Si es queja -> Redacta borrador en Gmail. _Ideal para:_ Procesos repetitivos y flujos de trabajo. \{% endtab %\} \{% endtabs %\}

\{% hint style="info" %\} VISIÃ“N DE ARQUITECTO No empieces construyendo el monstruo completo. Empieza por el Cerebro + Ego. Luego dale Memoria. Y solo cuando confÃ­es en Ã©l, dale Manos. \{% endhint %\}

